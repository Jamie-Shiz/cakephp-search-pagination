------------------------------
CakePHP SearchPagination Helper
------------------------------

This helper allows you to paginate complex search results, and automatically
keeps track of the search parameters in the pagination links.

See http://wp.serpere.info/ for more details (Japanese only).

Usage
------------------------------

* Model

First, you need a model whose 'set' method can accept the search parameters.
In simple cases your existing models will be enough, but in more complex cases
you should create a new one.

<code>
class UserSearch extends AppModel
{
  var $useTable = false;

  var $_schema = array('username' => array('type' => 'string'),
		       'created_from' => array('type' => 'date'),
		       'created_to' => array('type' => 'date'),
		       'group_id' => array('type' => 'integer'),
		       /* ... */
		       );

  function buildQuery()
  {
    $params = $this->data[$this->alias];

    /* ... Builds search criteria using $params ... */

    return array('conditions' => array(/* ... */),
                 'joins' => array(/* ... */),
                /* ... */);
  }
}
</code>

* Controller

In the controller, you need to call the SearchPagination->setup method
passing the Model name as the first parameter.

Then you can retrieve the search parameters from both Controller::$data 
and Model::$data; they have the exact same values.

<code>
class UsersController extends AppController
{
  var $components = array('SearchPagination.SearchPagination');

  function search()
  {
    $this->SearchPagination->setup('UserSearch');
    $this->paginate = $this->UserSearch->buildQuery();

    $this->set('users', $this->paginate('User'));
    $this->set('groups', $this->User->Group->find('list'));
  }
}
</code>

* View

There is nothing special in view. You can use the FormHelper and PaginatorHelper as usual.
All pagination links generated by the PaginationHelper will have the search parameters
in their QUERY_STRINGs.

<code>
echo "<h2>Search Form<h2>";
echo $form->create('UserSearch', array('action' => 'search', 'class' => 'complex-search'));
echo $form->input('username');
echo $form->input('created');
echo $form->input('group_id');
echo $form->end('Search');

echo $paginator->numbers(array('modulus' => 10));

foreach($users as $user) {
   echo $user['User']['id'];
   //...
}
</code>